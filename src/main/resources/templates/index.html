<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>Ekonomika ČR</title>
    <link data-th-href="@{/styles.css}" rel="stylesheet">
    <link rel="stylesheet" data-th-href="@{/webjars/font-awesome/5.12.0/css/all.css}"/>

    <script type="text/javascript" data-th-src="@{/webjars/highcharts/8.0.4/highcharts.js}"></script>

</head>

<body>

<!-- highcharts common options -->
<div th:insert="fragments/highchartsoptions :: highchartsoptions"></div>

<!-- header -->
<div th:insert="fragments/header :: header"></div>

<!-- content -->
<div>

    <!-- gdp -->
    <section class="section">

        <div class="container">

            <h1 class="title is-4">Hrubý domácí produkt</h1>

            <div id="chart_gdp" style="height: 500px; min-width: 310px"></div>

            <script data-th-inline="javascript">

                var yearlyGdps = /*[[${dashboard.yearlyGDPs}]]*/ {};
                var title = "Graf HDP v běžných cenách";
                var tooltipText = "";

                var formattedData = yearlyGdps.map(function (it) {
                    return [it.year, it.millionsCrowns / 1000];
                });

                Highcharts.chart("chart_gdp", {
                    chart: {
                        zoomType: "x"
                    },
                    title: {
                        text: title
                    },
                    subtitle: {
                        text: document.ontouchstart === undefined ?
                            "Kliknutím a tažením přiblížíte" : "Dotekem přiblížíte"
                    },
                    yAxis: {
                        title: {
                            text: "Miliardy Kč"
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            label: {
                                connectorAllowed: false
                            },
                        }
                    },
                    tooltip: {
                        pointFormat: "{point.y:.0f} miliard Kč"
                    },
                    series: [{
                        type: "area",
                        name: tooltipText,
                        data: formattedData
                    }]
                });

            </script>

        </div>

    </section>

    <!-- unemployment -->
    <section class="section">

        <div class="container">

            <h1 class="title is-4">Nezaměstnanost</h1>

            <div id="chart_unemployment" style="height: 500px; min-width: 310px"></div>

            <script data-th-inline="javascript">


                var yearlyGdps = /*[[${dashboard.yearlyUnempRates}]]*/ {};
                var title = "Graf nezaměstnanosti v %";
                var tooltipText = "";

                var formattedData = yearlyGdps.map(function (it) {
                    return [it.year, it.unemploymentRatePercent];
                });

                Highcharts.chart("chart_unemployment", {
                    chart: {
                        zoomType: "x"
                    },
                    title: {
                        text: title
                    },
                    subtitle: {
                        text: document.ontouchstart === undefined ?
                            "Kliknutím a tažením přiblížíte" : "Dotekem přiblížíte"
                    },
                    yAxis: {
                        title: {
                            text: "Nezaměstnanost %"
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            label: {
                                connectorAllowed: false
                            },
                        }
                    },
                    tooltip: {
                        pointFormat: "{point.y:.1f} %"
                    },
                    series: [{
                        type: "area",
                        name: tooltipText,
                        data: formattedData
                    }]
                });

            </script>

        </div>

    </section>

    <!-- inflation -->
    <section class="section">

        <div class="container">

            <h1 class="title is-4">Inflace</h1>

            <div id="chart_inflation" style="height: 500px; min-width: 310px"></div>

            <script data-th-inline="javascript">


                var yearlyGdps = /*[[${dashboard.yearlyInflationRates}]]*/ {};
                var title = "Graf meziročního vývoje inflace v %";
                var tooltipText = "";

                var formattedData = yearlyGdps.map(function (it) {
                    return [it.year, it.valuePercent];
                });

                Highcharts.chart("chart_inflation", {
                    chart: {
                        zoomType: "x"
                    },
                    title: {
                        text: title
                    },
                    subtitle: {
                        text: document.ontouchstart === undefined ?
                            "Kliknutím a tažením přiblížíte" : "Dotekem přiblížíte"
                    },
                    yAxis: {
                        title: {
                            text: "Inflace %"
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            label: {
                                connectorAllowed: false
                            },
                        }
                    },
                    tooltip: {
                        pointFormat: "{point.y:.1f} %"
                    },
                    series: [{
                        type: "area",
                        name: tooltipText,
                        data: formattedData
                    }]
                });

            </script>

        </div>

    </section>

    <!-- public debt -->
    <section class="section">

        <div class="container">

            <h1 class="title is-4">Státní dluh</h1>

            <div id="chart_public_debt" style="height: 500px; min-width: 310px"></div>

            <script data-th-inline="javascript">
                var yearlyGdps = /*[[${dashboard.publicDebt}]]*/ {};
                var title = "Graf vývoje státního dluhu v běžných cenách";

                var formattedData = yearlyGdps.map(function (it) {
                    return [it.year, it.millionsCrowns / 1000];
                });

                Highcharts.chart("chart_public_debt", {
                    chart: {
                        zoomType: "x"
                    },
                    title: {
                        text: title
                    },
                    subtitle: {
                        text: document.ontouchstart === undefined ?
                            "Kliknutím a tažením přiblížíte" : "Dotekem přiblížíte"
                    },
                    yAxis: {
                        title: {
                            text: "Miliardy Kč"
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            label: {
                                connectorAllowed: false
                            },
                        }
                    },
                    tooltip: {
                        pointFormat: "{point.y:.0f} miliard Kč"
                    },
                    series: [{
                        type: "area",
                        data: formattedData
                    }]
                });

            </script>

        </div>

    </section>

    <!-- budget balance -->
    <section class="section">

        <div class="container">

            <h1 class="title is-4">Saldo státního rozpočtu</h1>

            <div id="chart_budget_balance" style="height: 500px; min-width: 310px"></div>

            <script data-th-inline="javascript">
                var yearlyGdps = /*[[${dashboard.budgetBalance}]]*/ {};
                var title = "Graf salda státního rozpočtu";

                var formattedData = yearlyGdps.map(function (it) {
                    return [it.year, it.millionsCrowns / 1000];
                });

                Highcharts.chart("chart_budget_balance", {
                    chart: {
                        zoomType: "x"
                    },
                    title: {
                        text: title
                    },
                    subtitle: {
                        text: document.ontouchstart === undefined ?
                            "Kliknutím a tažením přiblížíte" : "Dotekem přiblížíte"
                    },
                    yAxis: {
                        title: {
                            text: "Miliardy Kč"
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            label: {
                                connectorAllowed: false
                            },
                        }
                    },
                    tooltip: {
                        pointFormat: "{point.y:.0f} miliard Kč"
                    },
                    series: [{
                        type: "area",
                        data: formattedData
                    }]
                });

            </script>

        </div>

    </section>

    <!-- exchange rates -->
    <section class="section">

        <div class="container">

            <h1 class="title is-4">Kurzy pro <span data-th-text="${dashboard.exchangeRatesDate}"></span></h1>

            <table class="table is-hoverable is-fullwidth is-striped">

                <thead class="title is-5">
                <th>Země</th>
                <th>Název měny</th>
                <th>Kód měny</th>
                <th>Množsví</th>
                <th>Kurz</th>
                <th></th>
                </thead>
                <tbody>
                <tr data-th-each="entry : ${dashboard.exchangeRates}">
                    <td>[[${entry.country}]]</td>
                    <td>[[${entry.currencyName}]]</td>
                    <td>[[${entry.currencyCode}]]</td>
                    <td>[[${entry.amount}]]</td>
                    <td>[[${entry.exchangeRate}]]</td>
                    <td><a data-th-href="@{/kurzy/{path}(path=${entry.currencyCode})}">Více info</a></td>
                </tr>

                </tbody>

                <tfoot class="title is-5">
                <th>Země</th>
                <th>Název měny</th>
                <th>Kód měny</th>
                <th>Množsví</th>
                <th>Kurz</th>
                </tfoot>

            </table>
        </div>

    </section>
</div>

<!-- footer -->
<div th:insert="fragments/footer :: footer"></div>

</body>
</html>