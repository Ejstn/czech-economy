<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/common :: head"></head>

<script>

    jQuery(document).ready(function ($) {
        $(".table").click(function () {
            window.location = $(this).find('a').attr('href');
        });
    });

</script>

<body>

<!-- header -->
<div th:replace="fragments/common :: header"></div>

<!-- content -->
<section class="section has-text-centered">

    <!-- quick overview -->
    <div class="container">

        <h1 class="title is-4 is-centered">Základní přehled</h1>

        <div class="columns is-centered">

            <!-- gdp -->
            <div class="column">

                <div class="box">

                    <h1 class="title is-6">Meziroční vývoj reálného HDP</h1>

                    <p th:text="${dashboard.overview.latestGdp.year}"></p>
                    <p th:text="${#numbers.formatDecimal(dashboard.overview.latestGdp.percentChange, 0, 'COMMA', 1, 'POINT')+ '%'}"></p>

                </div>

            </div>

            <!-- inflation -->
            <div class="column">

                <div class="box">

                    <h1 class="title is-6">Meziroční inflace</h1>

                    <p>[[${dashboard.overview.inflation.month}]] [[${dashboard.overview.inflation.inflation.year}]]</p>

                    <p th:text="${#numbers.formatDecimal(dashboard.overview.inflation.inflation.valuePercent, 0, 'COMMA', 1, 'POINT') + '%'}"></p>

                </div>


            </div>

            <!-- unemployment -->
            <div class="column">

                <div class="box">

                    <h1 class="title is-6">Nezaměstnanost</h1>

                    <p th:text="${dashboard.overview.unemployment.quarter} + '. čtvrtletí ' +  ${dashboard.overview.unemployment.year}"></p>
                    <p th:text="${#numbers.formatDecimal(dashboard.overview.unemployment.unemploymentRatePercent, 0, 'COMMA', 1, 'POINT')+ '%'}"></p>

                </div>

            </div>

            <!-- exchange rate -->
            <div class="column">

                <div class="box">

                    <h1 class="title is-6">Kurzy koruny pro <span data-th-text="${dashboard.exchangeRatesDate}"></span>
                    </h1>


                    <table class="table is-hoverable is-striped is-fullwidth">

                        <thead class="title is-6">
                        <tr>
                            <th>Kód</th>
                            <th>Množsví</th>
                            <th>Kurz</th>
                        </tr>
                        </thead>

                        <tbody>
                        <tr data-th-each="entry : ${dashboard.overview.exchangeRates}">
                            <td>[[${entry.currencyCode}]]</td>
                            <td>[[${entry.amount}]]</td>
                            <td>[[${entry.exchangeRate}]] <a
                                    data-th-href="@{/kurzy/{path}(path=${entry.currencyCode})}"></a></td>
                        </tr>

                        </tbody>


                    </table>


                </div>

            </div>

        </div>

    </div>

    <br>

    <!-- real gdp 2010 prices -->
    <div class="container box has-echart" id="chart_real_gdp_2010_prices">

        <script data-th-inline="javascript">

            var myChart = echarts.init(document.getElementById('chart_real_gdp_2010_prices'), 'dark');
            var yearlyGdps = /*[[${dashboard.realGdp2010Prices}]]*/ {};
            var title = "Graf reálného HDP v cenách roku 2010";

            option = {
                tooltip: {},
                title: {
                    text: title,
                },
                toolbox: {
                    feature: {
                        restore: {},
                        saveAsImage: {}
                    }
                },
                xAxis: {
                    data: yearlyGdps.map(function (it) {
                        return it.year;
                    })
                },
                yAxis: {
                    type: 'value',
                    axisLabel: {
                        formatter: function (a) {
                            return a.toLocaleString() + ' mld Kč'
                        }
                    },
                },
                dataZoom: [{
                    type: 'inside',
                    start: 0,
                    end: 100
                },
                ],
                series: [
                    {
                        name: 'HDP',
                        type: 'line',
                        sampling: 'average',
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: '#5e92f3'
                            }, {
                                offset: 1,
                                color: '#003c8f'
                            }])
                        },
                        data: yearlyGdps.map(function (it) {
                            return Math.round(it.gdpMillionsCrowns / 1000);
                        })
                    }
                ]
            };

            myChart.setOption(option);


            // Highcharts.chart("chart_real_gdp_2010_prices", {
            //     chart: {
            //         zoomType: "x"
            //     },
            //     title: {
            //         text: title
            //     },
            //     subtitle: {
            //         text: document.ontouchstart === undefined ?
            //             "Kliknutím a tažením přiblížíte" : "Dotekem přiblížíte"
            //     },
            //     yAxis: {
            //         title: {
            //             text: "Miliardy Kč"
            //         }
            //     },
            //     legend: {
            //         enabled: false
            //     },
            //     plotOptions: {
            //         series: {
            //             label: {
            //                 connectorAllowed: false
            //             },
            //         }
            //     },
            //     tooltip: {
            //         pointFormat: "{point.y:.0f} miliard Kč"
            //     },
            //     series: [{
            //         type: "area",
            //         name: tooltipText,
            //         data: formattedData
            //     }],
            //     credits: {
            //         enabled: false
            //     }
            // });

        </script>

    </div>

    <!-- unemployment -->
    <div class="container box">

        <div class="container has-echart" id="chart_unemployment"></div>

        <script data-th-inline="javascript">

            var myChart = echarts.init(document.getElementById('chart_unemployment'), 'dark');

            var unemp = /*[[${dashboard.yearlyUnempRates}]]*/ {};
            var title = "Graf nezaměstnanosti v %";

            option = {
                tooltip: {},
                title: {
                    text: title,
                },
                toolbox: {
                    feature: {
                        restore: {},
                        saveAsImage: {}
                    }
                },
                xAxis: {
                    data: unemp.map(function (it) {
                        return it.year;
                    })
                },
                yAxis: {
                    type: 'value',
                    axisLabel: {
                        formatter: function (a) {
                            return a + ' %'
                        }
                    },
                },
                dataZoom: [{
                    type: 'inside',
                    start: 0,
                    end: 100
                },
                ],
                series: [
                    {
                        name: 'Nezaměstnanost',
                        type: 'line',
                        sampling: 'average',
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: '#5e92f3'
                            }, {
                                offset: 1,
                                color: '#003c8f'
                            }])
                        },
                        data: unemp.map(function (it) {
                            return it.unemploymentRatePercent.toFixed(1);
                        })
                    }
                ]
            };

            myChart.setOption(option);

        </script>

    </div>

    <!-- inflation -->
    <div class="container box">

        <div class="container has-echart" id="chart_inflation"></div>

        <script data-th-inline="javascript">

            var myChart = echarts.init(document.getElementById('chart_inflation'), 'dark');

            var unemp = /*[[${dashboard.yearlyInflationRates}]]*/ {};
            var title = "Graf meziročního vývoje inflace v %";

            option = {
                tooltip: {},
                title: {
                    text: title,
                },
                toolbox: {
                    feature: {
                        restore: {},
                        saveAsImage: {}
                    }
                },
                xAxis: {
                    data: unemp.map(function (it) {
                        return it.year;
                    })
                },
                yAxis: {
                    type: 'value',
                    axisLabel: {
                        formatter: function (a) {
                            return a + ' %'
                        }
                    },
                },
                dataZoom: [{
                    type: 'inside',
                    start: 0,
                    end: 100
                },
                ],
                series: [
                    {
                        name: 'Inflace',
                        type: 'line',
                        sampling: 'average',
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: '#5e92f3'
                            }, {
                                offset: 1,
                                color: '#003c8f'
                            }])
                        },
                        data: unemp.map(function (it) {
                            return it.valuePercent.toFixed(1);
                        })
                    }
                ]
            };

            myChart.setOption(option);

        </script>

    </div>

    <!-- public debt -->
    <div class="container box">

        <div class="container has-echart" id="chart_public_debt"></div>

        <script data-th-inline="javascript">
            var myChart = echarts.init(document.getElementById('chart_public_debt'), 'dark');

            var yearlyGdps = /*[[${dashboard.publicDebt}]]*/ {};
            var title = "Graf vývoje státního dluhu v běžných cenách";

            option = {
                tooltip: {},
                title: {
                    text: title,
                },
                toolbox: {
                    feature: {
                        restore: {},
                        saveAsImage: {}
                    }
                },
                xAxis: {
                    data: yearlyGdps.map(function (it) {
                        return it.year;
                    })
                },
                yAxis: {
                    type: 'value',
                    axisLabel: {
                        formatter: function (a) {
                            return a.toLocaleString() + ' mld Kč'
                        }
                    },
                },
                dataZoom: [{
                    type: 'inside',
                    start: 0,
                    end: 100
                },
                ],
                series: [
                    {
                        name: 'Státní dluh',
                        type: 'line',
                        sampling: 'average',
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: '#5e92f3'
                            }, {
                                offset: 1,
                                color: '#003c8f'
                            }])
                        },
                        data: yearlyGdps.map(function (it) {
                            return Math.round(it.millionsCrowns / 1000);
                        })
                    }
                ]
            };

            myChart.setOption(option);

        </script>

    </div>

    <!-- exchange rates -->
    <div class="container box">

        <div class="table-container">

            <h1 class="title is-4">Kurzy pro <span data-th-text="${dashboard.exchangeRatesDate}"></span></h1>

            <table class="table is-hoverable is-fullwidth is-striped">

                <thead class="title is-6">
                <tr>
                    <th>Země</th>
                    <th>Název</th>
                    <th>Kód</th>
                    <th>Množsví</th>
                    <th>Kurz</th>
                </tr>
                </thead>

                <tbody>
                <tr data-th-each="entry : ${dashboard.exchangeRates}">
                    <td>[[${entry.country}]]</td>
                    <td>[[${entry.currencyName}]]</td>
                    <td>[[${entry.currencyCode}]]</td>
                    <td>[[${entry.amount}]]</td>
                    <td>[[${entry.exchangeRate}]]<a data-th-href="@{/kurzy/{path}(path=${entry.currencyCode})}"></a>
                    </td>
                </tr>

                </tbody>


            </table>
        </div>
    </div>

</section>

<!-- footer -->
<div th:replace="fragments/common :: footer"></div>

</body>
</html>